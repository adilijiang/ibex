macro(include_test test_exec test_src test_args is_test)
    include_directories(${global_include_directories})
    include_directories(${global_trilinos_include_directories})
    set(test_dependencies utilities)
    
    add_executable(${test_exec} ${test_src})
    target_link_libraries(${test_exec} ${test_dependencies})
    target_link_libraries(${test_exec} ${global_trilinos_link_libraries})
    if(${is_test})
        add_test(${test_exec} ${test_exec} ${test_args})
    endif()
    install(TARGETS ${test_exec} DESTINATION ${CMAKE_INSTALL_PREFIX}/test)
endmacro()

include_test(tst_indexing tst_Indexing.cc "" true)
include_test(tst_vector_functions tst_Vector_Functions.cc "" true)
include_test(tst_math_functions tst_Math_Functions.cc "" true)
include_test(tst_sparse_storage tst_Sparse_Storage.cc "" true)
include_test(tst_dense_solve tst_Dense_Solve.cc "" true)
include_test(tst_integration tst_Integration.cc "" true)
include_test(tst_quadrature tst_Quadrature.cc "" true)
include_test(tst_xml tst_XML.cc ${CMAKE_CURRENT_SOURCE_DIR}/input true)
include_test(tst_trilinos tst_Trilinos.cc "" false)

add_subdirectory(input)
